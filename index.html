<script src="/socket.io/socket.io.js"></script>
<script src="/lib/user.js"></script>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="home.css">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.6" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
</head>
<script>
var socket = io.connect("http://" +window.location.host + "/");

function Game(){
	
	var game=prompt("create a new game");
	
	if (game!=null)
	  {
		socket.emit('game',game);
	  }
	window.location.href = "http://" +window.location.host + "/editor.html"+"?gameid="+game;
}

function verwijder(id){
	var dir = './Games/'+id;
	socket.emit('delete game',dir);
	$("#"+id).remove();
	console.log(id);
}

function verwijderbutton(id){
	$("#"+id).remove();
	console.log(id);
}

function redirect(game){
	window.location.href = "http://" +window.location.host + "/editor.html"+"?gameid="+game;
}

function searchGames(){
	socket.emit('search', function (games){
	for (var i in games){
	var html = '<a href="/editor.html?gameid='+games[i]+'">'+games[i]+'</a>'; 
	var deletebutton = '<button id="'+games[i]+"del"+'" onclick="verwijder(\''+games[i]+'\');verwijderbutton(\''+games[i]+"del"+'\');">Delete</button><br>';
	$("ul").append('<li>'+html+deletebutton+'</li>');
	}
	});
}
</script>
</head>
<body onload="searchGames()">
<button class="button_create" onclick="Game()">Make a new Game</button><br>

<h1>Existing games</h1>
<ul>
</ul>


</body>
</html>